+++
description = "Weekly plan"
title = "Learn, todo and done 11-15/1/21"
date = 2021-01-11T11:23:05+08:00
tags = ["API", "Clean Code", "Udemy"]
author = "Ken Cho"

+++  
### Learn
1. Clean Code, [YouTube](https://www.youtube.com/watch?v=7EmboKQH8lM)
2. PHP: The Right Way, [link](https://phptherightway.com/)
3. Udemy courses

### Todo - Project [repo](https://github.com/kencho51/mint_doi), [doc](https://docs.google.com/document/d/1CopK9e9QclOd91WRN1LREEBefMDb5cWoHiElj3IfKLc/edit#)
1. Test sandbox DataCite API to mint DOIs using peer review metadata  
2. Meeting with Nicole to confirm the user requirements before 22/1?

### Todo
2. [Link previews #428](https://github.com/gigascience/gigadb-website/issues/428)  
    2.1 Background readings
    
### Done
1. [Add citation button #83](https://github.com/gigascience/gigadb-website/pull/521)  
   1.1 Remove html entities from `Text` return  
   - Write JS function trim the API return results and then display on new window?
```php
    <?php
    $identifier = $model->identifier;
    $text = file_get_contents('https://data.datacite.org/text/x-bibliography/10.5524/'.$identifier);
    $clean_text = strip_tags(preg_replace("/&#?[a-z0-9]+;/i","", $text));
    ?>
    <a id="citeText" onclick="showText()">Text</a>

```
```javascript
    //Write the clean text to a new window
    function showText() {
        var text = "<?php echo $clean_text; ?>"
        // console.log(text);
        var textWindow = window.open();
        textWindow.document.write(text);
    }
```
   - But finally, change to `Formatted Text`  
   - Add `rel="noopener noreferrer"` to `target="_blank"` attribute to [prevent](https://www.freecodecamp.org/news/how-to-use-html-to-open-link-in-new-tab/) possible malicious attacks

2. [Allow other web sites to make link previews #513](https://github.com/gigascience/gigadb-website/issues/513)  
    2.1 Update context function name  
    2.2 Allow multiple lines assertion  

### Reference


[![Build Status](https://travis-ci.com/kencho51/gigathing.svg?branch=master)](https://travis-ci.com/kencho51/gigathing)
